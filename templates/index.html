{% extends 'base.html' %}
{% load static %}
{% block content %}
  <div class="floating-hearts"></div>
  <main style="display:flex;flex-direction:column;align-items:center;min-height:50vh;">
    <!-- Love Heart Clock Hero -->
  <section class="love-heart-clock" style="width:100%;display:flex;justify-content:center;margin-top:36px;margin-bottom:clamp(76px, 10vw, 128px);">
    <div class="heart-stage" style="position:relative;width:min(calc(80vw * 0.7), 364px);aspect-ratio:1/1;display:flex;align-items:center;justify-content:center;">
        <!-- Real-time floral heart: elements are created progressively with JS -->
        <div class="heart-florals" aria-hidden="true" style="position:absolute;inset:0;"></div>

        <!-- Inner content (names + clock) -->
  <div class="heart-center" style="position:absolute;inset:18% 10% 4% 10%;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;background:transparent;border-radius:20px;padding:18px 16px;">
          <div class="names" style="font-family:'Fredoka','Poppins',sans-serif;font-weight:800;font-size:clamp(1.26rem, 3.24vw, 1.8rem);line-height:1.1;background:linear-gradient(90deg,#ef476f,#ff9a9e 60%,#ffd1dc);-webkit-background-clip:text;background-clip:text;color:transparent;letter-spacing:0.5px;">
            Divyam &amp; Jyoti
          </div>
          <div class="subtext" style="margin-top:4px;color:#6b7280;font-family:'Poppins',sans-serif;font-weight:600;font-size:clamp(0.72rem,1.98vw,0.855rem);">
            since our beautiful journey began
          </div>
          <div id="love-clock" class="clock" style="margin-top:10px;font-family:'JetBrains Mono','Fira Code',ui-monospace,monospace;color:#0b7285;font-weight:800;font-size:clamp(0.9rem,3.15vw,1.08rem);letter-spacing:0.5px;">
            0 days 00 hours 00 minutes 00 seconds
          </div>
        </div>

        <!-- Sparkles -->
        <img src="{% static 'img/sparkle.svg' %}" alt="sparkle" style="position:absolute;top:4%;left:12%;width:18px;opacity:0.6;animation: twinkle 2.8s infinite ease-in-out;" />
        <img src="{% static 'img/sparkle.svg' %}" alt="sparkle" style="position:absolute;bottom:8%;right:14%;width:22px;opacity:0.75;animation: twinkle 3.4s infinite ease-in-out 0.6s;" />
      </div>
    </section>
    <section style="text-align:center;max-width:520px;margin:0 auto;">
  <div class="tagline" style="font-family:'Fredoka','Poppins',sans-serif;font-weight:700;margin-bottom:8px;color:#ef476f;">A universe for Divyam & Jyoti <span style="font-size:1.2em;">üå∏</span></div>
      <!-- <div style="margin:0 auto 12px auto;max-width:480px;background:rgba(255,255,255,0.85);border-radius:18px;box-shadow:0 2px 24px #22223b0a;padding:16px 24px 16px 24px;font-family:'Poppins',sans-serif;font-size:1.13rem;color:var(--primary);font-weight:500;line-height:1.7;">Jyoti, you're my warmest light and quietest home ‚Äî my laughter, my calm, my forever. This universe is for you.</div>
      <div class="logo" style="font-family:'Poppins',sans-serif;font-size:3.2rem;font-weight:800;letter-spacing:2px;margin-bottom:8px;margin-top:0;">DJ‚àûverse</div> -->
      <div style="margin:0 auto 18px auto;max-width:420px;background:var(--white);border-radius:18px;box-shadow:0 2px 24px #ef476f22;padding:18px 22px 14px 22px;">
  <span id="hero-quote" style="font-size:1.28rem;color:#118ab2;font-family:'Fredoka','Poppins',sans-serif;font-weight:600;">‚ÄúYou are my today and all of my tomorrows.‚Äù</span>
      </div>
  <a href="{% url 'gallery' %}" class="enter" style="margin-top:10px;background:#ef476f;color:#fff;font-weight:700;box-shadow:0 2px 16px #ef476f22;border-radius:999px;font-family:'Fredoka','Poppins',sans-serif;">Enter Gallery <span style="font-size:1.1em;">‚Üí</span></a>
    </section>
  </main>
  <style>
    @keyframes twinkle { 0%, 100% { transform: scale(0.9) rotate(0deg); opacity: 0.6; } 50% { transform: scale(1.15) rotate(8deg); opacity: 1; } }
    @keyframes floral-pop { 0% { transform: translate(-50%, -50%) scale(0.6) rotate(-8deg); opacity: 0; } 100% { transform: translate(-50%, -50%) scale(1) rotate(0); opacity: 1; } }
    .heart-flower { position:absolute; transform: translate(-50%, -50%); filter: drop-shadow(0 2px 8px rgba(239,71,111,0.18)); animation: floral-pop 380ms ease-out both; }
    @media (max-width: 420px) {
      /* Push inner content further down on small screens */
      .love-heart-clock .heart-center { inset: 26% 8% 6% 8% !important; }
    }
    @media (max-width: 430px) {
      /* Pixel 7 width ~412px: push more and slim the floral ring slightly */
      .love-heart-clock .heart-center { inset: 30% 8% 6% 8% !important; }
      .love-heart-clock .heart-flower { font-size: 12px !important; }
    }
    @media (max-width: 360px) {
      /* Extra-safe layout for very small phones */
      .love-heart-clock .heart-center { inset: 32% 8% 6% 8% !important; }
      .love-heart-clock .names { font-size: 1.08rem !important; }
      .love-heart-clock .subtext { font-size: 0.702rem !important; }
      .love-heart-clock .clock { font-size: 0.855rem !important; }
    }
  </style>
  <script>
    // Rotating hero quote with typewriter effect
    const heroQuotes = [
      {text: "You are my today and all of my tomorrows."},
      {text: "In all the world, there is no heart for me like yours."},
      {text: "Whatever our souls are made of, yours and mine are the same."},
      {text: "I love you not only for what you are, but for what I am when I am with you."},
      {text: "You are my sun, my moon, and all my stars."},
      {text: "If I had a flower for every time I thought of you, I could walk in my garden forever."},
      {text: "I look at you and see the rest of my life in front of my eyes."},
      {text: "You are the best thing I never planned."}
    ];
    let hqIdx = 0;
    function typeWriterQuote(text, el, speed = 64, cb) {
      el.textContent = '';
      let i = 0;
      function type() {
        if (i < text.length) {
          el.textContent += text.charAt(i);
          // Add a little random jitter for vintage effect
          let jitter = 0;
          if (text.charAt(i) !== ' ') {
            jitter = Math.floor(Math.random() * 40); // 0-40ms extra for non-space chars
          }
          i++;
          setTimeout(type, speed + jitter);
        } else if (cb) {
          cb();
        }
      }
      type();
    }
    function showHeroQuote() {
      const q = heroQuotes[hqIdx];
      const el = document.getElementById('hero-quote');
      typeWriterQuote(`‚Äú${q.text}‚Äù`, el, 64);
      hqIdx = (hqIdx + 1) % heroQuotes.length;
    }
    setInterval(showHeroQuote, 7000);
    document.addEventListener('DOMContentLoaded', function() {
      showHeroQuote();
      // Love clock: update every second from START_DATE
      // TODO: Set your real start date/time here (local time). Example below is a placeholder.
  const START_DATE = new Date('2018-02-05T00:00:00');
      const clockEl = document.getElementById('love-clock');
      function pad2(n){ return n.toString().padStart(2,'0'); }
      function updateLoveClock(){
        const now = new Date();
        let diff = now.getTime() - START_DATE.getTime();
        if (diff < 0) diff = 0;
        const dayMs = 24*60*60*1000;
        const hourMs = 60*60*1000;
        const minMs = 60*1000;
        const days = Math.floor(diff / dayMs);
        const hours = Math.floor((diff % dayMs) / hourMs);
        const mins = Math.floor((diff % hourMs) / minMs);
        const secs = Math.floor((diff % minMs) / 1000);
        clockEl.textContent = `${days} days ${pad2(hours)} hours ${pad2(mins)} minutes ${pad2(secs)} seconds`;
      }
      updateLoveClock();
      setInterval(updateLoveClock, 1000);

      // Real-time creation of floral heart
      const stage = document.querySelector('.heart-stage');
      const floralLayer = document.querySelector('.heart-florals');
      if (stage && floralLayer) {
        // Prepare points along a parametric heart curve
        const flowers = ['üå∏','üåº','üå∑','üå∫','üíê'];
        const total = 160; // number of flowers
        const duration = 2300; // total creation duration in ms
        const startTs = performance.now();
        // Normalize to keep heart inside square box
        function heartXY(t){
          const x = 16 * Math.pow(Math.sin(t), 3);
          const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
          // Scale to [-1,1] approximately (based on curve extents)
          const sx = x / 18; // ~[-0.9,0.9]
          const sy = y / 18; // ~[-1,1]
          // Map to percentage inside the square (invert y for DOM coords)
          const px = (sx * 0.9 + 0.5) * 100; // margin 10%
          const py = ((-sy) * 0.9 + 0.5) * 100;
          return {px, py};
        }
        function placeFlower(i){
          const t = (i / total) * Math.PI * 2;
          const {px, py} = heartXY(t);
          const span = document.createElement('span');
          span.className = 'heart-flower';
          span.textContent = flowers[i % flowers.length];
          // Responsive size
          const base = Math.max(14, Math.min(24, stage.clientWidth * 0.04));
          span.style.left = px + '%';
          span.style.top = py + '%';
          span.style.fontSize = base + 'px';
          // Staggered animation delay for nice cascade
          span.style.animationDelay = (i * (duration/total) * 0.65) + 'ms';
          floralLayer.appendChild(span);
        }
        // Progressive creation
        let i = 0;
        function step(){
          const now = performance.now();
          // Insert several per frame for smooth drawing proportional to elapsed time
          const elapsed = now - startTs;
          const target = Math.min(total, Math.floor((elapsed / duration) * total) + 1);
          while (i < target) { placeFlower(i++); }
          if (i < total) requestAnimationFrame(step);
        }
        requestAnimationFrame(step);
        // Handle resize: rebuild to keep positions crisp
        let resizeTimer;
        window.addEventListener('resize', () => {
          clearTimeout(resizeTimer);
          resizeTimer = setTimeout(() => {
            // Rebuild on resize
            floralLayer.innerHTML = '';
            i = 0;
            requestAnimationFrame(() => { requestAnimationFrame(step); });
          }, 120);
        });
      }
    });
  </script>
{% endblock %}
